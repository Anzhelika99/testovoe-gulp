const popupOpen=()=>{const e=document.querySelectorAll(".popup-link"),t=document.querySelector("body"),o=document.querySelectorAll(".close-popup");let r=!0;const s=(e,t=!0)=>{r&&(e.classList.remove("open"),t&&l())},c=()=>{const e=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";t.style.paddingRight=e,t.classList.add("lock"),r=!1,setTimeout((()=>{r=!0}),400)},l=()=>{setTimeout((()=>{t.style.paddingRight="0px",t.classList.remove("lock")}),400),r=!1,setTimeout((()=>{r=!0}),400)};e.forEach((e=>{e.addEventListener("click",(t=>{const o=e.getAttribute("data-link");(e=>{if(e&&r){const t=document.querySelector(".popup.open");t?s(t):c(),e.classList.add("open"),e.addEventListener("click",(e=>{e.target.closest(".popup__content")||s(e.target.closest(".popup"))}))}})(document.getElementById(o)),t.preventDefault()}))})),o.forEach((e=>{e.addEventListener("click",(t=>{s(e.closest(".popup")),t.preventDefault()}))})),Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector)};popupOpen();const form=document.getElementById("form"),formValidate=e=>{let t=0,o=document.querySelectorAll("._req");const r=document.querySelector(".checkbox__label");return o.forEach((e=>{console.dir(e.id),removeErr(e),e.classList.contains("_phone")?phoneTest(e)&&(addErr(e),t++):"checkbox"===e.getAttribute("type")&&!1===e.checked?(addErr(r),t++):""===e.value&&(addErr(e),t++)})),t},formSend=async e=>{e.preventDefault(),0===formValidate()&&form.reset()};form.addEventListener("submit",formSend);const phoneTest=e=>!/^((\+7|7|8)+([0-9]){10})$/.test(e.value.trim()),addErr=e=>{const t=document.querySelector(`label[for="${e.id}"]`);t&&t.classList.add("_error-label"),e.parentElement.classList.add("_error"),e.classList.add("_error")},removeErr=e=>{const t=document.querySelector(`label[for="${e.id}"]`);t&&t.classList.remove("_error-label"),e.parentElement.classList.remove("_error"),e.classList.remove("_error")};